{"openapi":"3.0.0","paths":{"/":{"get":{"operationId":"AppController_getHello","parameters":[],"responses":{"200":{"description":""}},"tags":["App"]}},"/user/register":{"post":{"operationId":"UserController_register","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateUserDto"}}}},"responses":{"201":{"description":"用户创建成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/User"}}}},"400":{"description":"请求参数错误"},"409":{"description":"用户名或邮箱已存在"}},"summary":"注册新用户（仅用于内部管理）","tags":["user"]}},"/tenant":{"post":{"operationId":"TenantController_create","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateTenantDto"}}}},"responses":{"201":{"description":"租户创建成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Tenant"}}}}},"summary":"创建租户","tags":["租户管理"]},"get":{"operationId":"TenantController_findAll","parameters":[],"responses":{"200":{"description":"获取租户列表成功","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Tenant"}}}}}},"summary":"获取所有租户","tags":["租户管理"]}},"/tenant/{id}":{"get":{"operationId":"TenantController_findOne","parameters":[{"name":"id","required":true,"in":"path","description":"租户ID","schema":{"type":"number"}}],"responses":{"200":{"description":"获取租户信息成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Tenant"}}}}},"summary":"根据ID查询租户","tags":["租户管理"]},"patch":{"operationId":"TenantController_update","parameters":[{"name":"id","required":true,"in":"path","description":"租户ID","schema":{"type":"number"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateTenantDto"}}}},"responses":{"200":{"description":"更新租户信息成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Tenant"}}}}},"summary":"更新租户信息","tags":["租户管理"]},"delete":{"operationId":"TenantController_remove","parameters":[{"name":"id","required":true,"in":"path","description":"租户ID","schema":{"type":"number"}}],"responses":{"204":{"description":"删除租户成功"}},"summary":"删除租户","tags":["租户管理"]}},"/system/tenant/get-id-by-name":{"get":{"operationId":"TenantController_getIdByName","parameters":[{"name":"name","required":true,"in":"query","description":"租户名称","schema":{"type":"string"}}],"responses":{"200":{"description":"租户ID","content":{"application/json":{"schema":{"type":"number"}}}}},"summary":"根据租户名称获取租户ID","tags":["租户管理"]}},"/system/tenant/get-by-website":{"get":{"operationId":"TenantController_getByWebsite","parameters":[{"name":"website","required":true,"in":"query","description":"网站地址","schema":{"type":"string"}}],"responses":{"200":{"description":"获取租户信息成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Tenant"}}}}},"summary":"根据网站地址获取租户","tags":["租户管理"]}},"/system/auth/login":{"post":{"operationId":"AuthController_login","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginUserDto"}}}},"responses":{"200":{"description":"登录成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginResponseDto"}}}}},"summary":"用户登录","tags":["认证"]}},"/system/auth/refresh-token":{"get":{"operationId":"AuthController_refreshTokenByQuery","parameters":[{"name":"refreshToken","required":true,"in":"query","description":"刷新令牌","schema":{"type":"string"}},{"name":"sessionId","required":false,"in":"query","description":"会话ID","schema":{"type":"string"}}],"responses":{"200":{"description":"刷新成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginResponseDto"}}}}},"summary":"刷新令牌","tags":["认证"]}},"/system/auth/refresh":{"post":{"operationId":"AuthController_refreshToken","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RefreshTokenDto"}}}},"responses":{"200":{"description":"刷新成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginResponseDto"}}}}},"summary":"刷新令牌(POST方式)","tags":["认证"]}},"/system/auth/logout":{"post":{"operationId":"AuthController_logout","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"properties":{"refreshToken":{"type":"string"},"sessionId":{"type":"string","nullable":true}},"required":["refreshToken"]}}}},"responses":{"200":{"description":"注销成功","content":{"application/json":{"schema":{"type":"boolean"}}}}},"summary":"注销登录","tags":["认证"]}},"/system/auth/get-permission-info":{"get":{"operationId":"AuthController_getPermissionInfo","parameters":[{"name":"tenant-id","required":false,"in":"header","description":"租户ID","schema":{"type":"string"}}],"responses":{"200":{"description":"返回当前用户权限信息","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PermissionInfoResponseDto"}}}}},"security":[{"bearer":[]}],"summary":"获取当前用户权限信息","tags":["认证"]}},"/system/auth/profile":{"get":{"operationId":"AuthController_getProfile","parameters":[],"responses":{"200":{"description":"返回当前用户信息","content":{"application/json":{"schema":{"example":{"userId":1,"username":"admin","roles":["admin"],"tenantId":1}}}}}},"security":[{"bearer":[]}],"summary":"获取当前用户信息","tags":["认证"]}},"/system/sso/sessions":{"get":{"operationId":"SsoController_getUserSessions","parameters":[],"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"summary":"获取当前用户的活跃会话列表","tags":["单点登录"]},"delete":{"operationId":"SsoController_invalidateAllSessions","parameters":[],"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"summary":"注销当前用户的所有会话(除当前会话)","tags":["单点登录"]}},"/system/sso/sessions/{sessionId}/extend":{"post":{"operationId":"SsoController_extendSession","parameters":[{"name":"sessionId","required":true,"in":"path","description":"会话ID","schema":{"type":"string"}}],"responses":{"201":{"description":""}},"security":[{"bearer":[]}],"summary":"延长会话有效期","tags":["单点登录"]}},"/system/sso/sessions/{sessionId}":{"delete":{"operationId":"SsoController_invalidateSession","parameters":[{"name":"sessionId","required":true,"in":"path","description":"会话ID","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"summary":"注销指定会话","tags":["单点登录"]}},"/template/sms":{"post":{"operationId":"TemplateController_createSmsTemplate","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateSmsTemplateDto"}}}},"responses":{"201":{"description":"模板创建成功.","content":{"application/json":{"schema":{"example":{"id":1,"name":"验证码模板","content":"您的验证码是: {{code}}，5分钟内有效","userId":1,"accountId":100,"code":"VERIFICATION_CODE","status":1,"createdAt":"2023-08-01T12:30:00Z","updatedAt":"2023-08-01T12:30:00Z"}}}}},"400":{"description":"参数错误."},"401":{"description":"未授权."}},"security":[{"bearer":[]}],"summary":"创建短信模板","tags":["template"]},"get":{"operationId":"TemplateController_findAllSmsTemplates","parameters":[],"responses":{"200":{"description":"成功获取模板列表.","content":{"application/json":{"schema":{"example":[{"id":1,"name":"验证码模板","content":"您的验证码是: {{code}}，5分钟内有效","userId":1,"accountId":100,"code":"VERIFICATION_CODE","status":1,"createdAt":"2023-08-01T12:30:00Z","updatedAt":"2023-08-01T12:30:00Z"}]}}}},"401":{"description":"未授权."}},"security":[{"bearer":[]}],"summary":"获取当前用户的所有短信模板 (不分页)","tags":["template"]}},"/template/sms/page":{"get":{"operationId":"TemplateController_getTemplatePage","parameters":[{"name":"page","required":false,"in":"query","description":"当前页码","schema":{"default":1,"example":1,"type":"number"}},{"name":"pageSize","required":false,"in":"query","description":"每页数量","schema":{"default":10,"example":10,"type":"number"}},{"name":"name","required":false,"in":"query","description":"模板名称 (模糊查询)","schema":{"example":"验证码","type":"string"}},{"name":"content","required":false,"in":"query","description":"模板内容 (模糊查询)","schema":{"example":"验证码","type":"string"}},{"name":"tenantId","required":false,"in":"query","description":"租户ID（仅管理员可用）","schema":{"example":1,"type":"number"}}],"responses":{"200":{"description":"成功获取模板分页列表.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaginationResDto"}}}},"401":{"description":"未授权."}},"security":[{"bearer":[]}],"summary":"分页获取当前用户的短信模板","tags":["template"]}},"/template/sms/{id}":{"get":{"operationId":"TemplateController_findOneSmsTemplate","parameters":[{"name":"id","required":true,"in":"path","description":"短信模板 ID","schema":{"type":"number"}}],"responses":{"200":{"description":"成功获取模板详情."},"401":{"description":"未授权."},"404":{"description":"模板未找到或不属于该用户."}},"security":[{"bearer":[]}],"summary":"获取单个短信模板详情","tags":["template"]},"patch":{"operationId":"TemplateController_updateSmsTemplate","parameters":[{"name":"id","required":true,"in":"path","description":"短信模板 ID","schema":{"type":"number"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateSmsTemplateDto"}}}},"responses":{"200":{"description":"模板更新成功."},"400":{"description":"参数错误."},"401":{"description":"未授权."},"404":{"description":"模板未找到或不属于该用户."}},"security":[{"bearer":[]}],"summary":"更新短信模板","tags":["template"]},"delete":{"operationId":"TemplateController_removeSmsTemplate","parameters":[{"name":"id","required":true,"in":"path","description":"短信模板 ID","schema":{"type":"number"}}],"responses":{"204":{"description":"模板删除成功."},"401":{"description":"未授权."},"404":{"description":"模板未找到或不属于该用户."}},"security":[{"bearer":[]}],"summary":"删除短信模板","tags":["template"]}},"/template/email":{"post":{"operationId":"TemplateController_createEmailTemplate","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateEmailTemplateDto"}}}},"responses":{"201":{"description":"模板创建成功.","content":{"application/json":{"schema":{"example":{"id":1,"name":"欢迎邮件","subject":"欢迎加入我们的服务","bodyHtml":"<p>尊敬的 {{name}}，感谢您注册我们的服务！</p>","bodyText":"尊敬的 {{name}}，感谢您注册我们的服务！","userId":1,"accountId":100,"code":"WELCOME_EMAIL","status":1,"createdAt":"2023-08-01T12:30:00Z","updatedAt":"2023-08-01T12:30:00Z"}}}}},"400":{"description":"参数错误."},"401":{"description":"未授权."}},"security":[{"bearer":[]}],"summary":"创建邮件模板","tags":["template"]},"get":{"operationId":"TemplateController_findAllEmailTemplates","parameters":[],"responses":{"200":{"description":"成功获取模板列表.","content":{"application/json":{"schema":{"example":[{"id":1,"name":"欢迎邮件","subject":"欢迎加入我们的服务","bodyHtml":"<p>尊敬的 {{name}}，感谢您注册我们的服务！</p>","bodyText":"尊敬的 {{name}}，感谢您注册我们的服务！","userId":1,"accountId":100,"code":"WELCOME_EMAIL","status":1,"createdAt":"2023-08-01T12:30:00Z","updatedAt":"2023-08-01T12:30:00Z"}]}}}},"401":{"description":"未授权."}},"security":[{"bearer":[]}],"summary":"获取当前用户的所有邮件模板","tags":["template"]}},"/template/email/{id}":{"get":{"operationId":"TemplateController_findOneEmailTemplate","parameters":[{"name":"id","required":true,"in":"path","description":"邮件模板 ID","schema":{"type":"number"}}],"responses":{"200":{"description":"成功获取模板详情."},"401":{"description":"未授权."},"404":{"description":"模板未找到或不属于该用户."}},"security":[{"bearer":[]}],"summary":"获取单个邮件模板详情","tags":["template"]},"patch":{"operationId":"TemplateController_updateEmailTemplate","parameters":[{"name":"id","required":true,"in":"path","description":"邮件模板 ID","schema":{"type":"number"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateEmailTemplateDto"}}}},"responses":{"200":{"description":"模板更新成功."},"400":{"description":"参数错误."},"401":{"description":"未授权."},"404":{"description":"模板未找到或不属于该用户."}},"security":[{"bearer":[]}],"summary":"更新邮件模板","tags":["template"]},"delete":{"operationId":"TemplateController_removeEmailTemplate","parameters":[{"name":"id","required":true,"in":"path","description":"邮件模板 ID","schema":{"type":"number"}}],"responses":{"204":{"description":"模板删除成功."},"401":{"description":"未授权."},"404":{"description":"模板未找到或不属于该用户."}},"security":[{"bearer":[]}],"summary":"删除邮件模板","tags":["template"]}},"/sms-provider":{"post":{"operationId":"SmsProviderController_createProvider","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateSmsProviderDto"}}}},"responses":{"201":{"description":"供应商配置已创建"},"400":{"description":"参数错误或验证失败"},"401":{"description":"未授权"}},"summary":"创建新的短信供应商配置","tags":["sms-provider"]},"get":{"operationId":"SmsProviderController_getAllProviders","parameters":[],"responses":{"200":{"description":"返回供应商列表"}},"summary":"获取所有短信供应商配置列表","tags":["sms-provider"]}},"/sms-provider/{id}":{"get":{"operationId":"SmsProviderController_getProvider","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"description":"返回供应商配置"},"404":{"description":"供应商不存在"}},"summary":"获取指定ID的短信供应商配置","tags":["sms-provider"]},"patch":{"operationId":"SmsProviderController_updateProvider","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateSmsProviderDto"}}}},"responses":{"200":{"description":"供应商配置已更新"},"400":{"description":"参数错误或验证失败"},"404":{"description":"供应商不存在"}},"summary":"更新短信供应商配置","tags":["sms-provider"]}},"/webhooks/onbuka/callback/mo":{"post":{"operationId":"SmsProviderOnbukaController_handleMoCallback","parameters":[],"responses":{"200":{"description":""}},"tags":["SmsProviderOnbuka"]}},"/webhooks/onbuka/callback/report":{"post":{"operationId":"SmsProviderOnbukaController_handleStatusReportCallback","parameters":[],"responses":{"200":{"description":""}},"tags":["SmsProviderOnbuka"]}},"/notification/sms":{"post":{"description":"\n    使用预定义的模板发送短信。\n    - 支持单个或多个手机号\n    - 支持模板变量替换\n    - 支持定时发送（可选）\n    - 返回批次ID用于后续查询发送状态\n    ","operationId":"NotificationController_sendSms","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SendSmsDto"}}}},"responses":{"201":{"description":"短信发送请求已接受","content":{"application/json":{"schema":{"example":{"batchId":"SMS_BATCH_20230801123456","success":true,"message":"短信发送请求已接受","failedNumbers":[]}}}}},"400":{"description":"参数错误"},"401":{"description":"未授权"},"404":{"description":"模板不存在"},"429":{"description":"发送频率超限"}},"security":[{"bearer":[]}],"summary":"发送短信","tags":["notification"]}},"/notification/email":{"post":{"description":"创建一个邮件发送批次，并将邮件添加到队列中进行异步处理。支持单条或批量发送。","operationId":"NotificationController_sendEmail","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SendEmailDto"}}}},"responses":{"201":{"description":"邮件发送任务已创建"},"400":{"description":"请求参数错误，例如邮箱格式无效或缺少必要参数"},"401":{"description":"未授权，需要有效的JWT令牌"},"404":{"description":"模板未找到，请检查templateId"}},"security":[{"bearer":[]}],"summary":"发送邮件通知","tags":["notification"]}},"/status/sms/messages":{"get":{"description":"支持按接收人、状态和批次ID过滤，返回满足条件的短信记录","operationId":"StatusController_getAllSmsMessages","parameters":[{"name":"page","required":true,"in":"query","description":"页码，从1开始","schema":{"minimum":1,"default":1,"example":1,"type":"number"}},{"name":"limit","required":true,"in":"query","description":"每页数量，默认为20，最大为100","schema":{"minimum":1,"maximum":100,"default":20,"example":20,"type":"number"}},{"name":"recipientNumber","required":false,"in":"query","description":"接收人手机号 (模糊查询)","schema":{"example":"1380","type":"string"}},{"name":"status","required":false,"in":"query","description":"状态","schema":{"example":"delivered","type":"string","enum":["pending","sent","delivered","failed"]}},{"name":"batchId","required":false,"in":"query","description":"批次ID","schema":{"example":1,"type":"number"}},{"name":"tenantId","required":false,"in":"query","description":"租户ID (仅管理员可用)","schema":{"example":1,"type":"number"}}],"responses":{"200":{"description":"成功获取短信记录","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaginatedResponseDto"}}}},"401":{"description":"未授权"}},"security":[{"bearer":[]}],"summary":"分页查询短信发送记录","tags":["status"]}},"/status/sms/received":{"get":{"description":"支持按发送人、接收人和内容过滤，返回满足条件的接收记录","operationId":"StatusController_getSmsReceivedMessages","parameters":[{"name":"page","required":true,"in":"query","description":"页码，从1开始","schema":{"minimum":1,"default":1,"example":1,"type":"number"}},{"name":"limit","required":true,"in":"query","description":"每页数量，默认为20，最大为100","schema":{"minimum":1,"maximum":100,"default":20,"example":20,"type":"number"}},{"name":"tenantId","required":false,"in":"query","description":"租户ID（仅管理员可用）","schema":{"example":1,"type":"number"}},{"name":"senderNumber","required":false,"in":"query","description":"发送方手机号 (模糊查询)","schema":{"example":"1380","type":"string"}},{"name":"recipientNumber","required":false,"in":"query","description":"接收方手机号 (模糊查询)","schema":{"example":"1390","type":"string"}},{"name":"content","required":false,"in":"query","description":"消息内容 (模糊查询)","schema":{"example":"验证码","type":"string"}}],"responses":{"200":{"description":"成功获取短信接收记录","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaginatedResponseDto"}}}},"401":{"description":"未授权"}},"security":[{"bearer":[]}],"summary":"分页查询短信接收记录","tags":["status"]}},"/status/sms/batch/{batchId}":{"get":{"description":"返回指定批次的详细信息，包括批次状态、成功/失败数量以及所有短信的状态","operationId":"StatusController_getSmsBatchStatus","parameters":[{"name":"batchId","required":true,"in":"path","description":"短信批次 ID","schema":{"example":123,"type":"number"}}],"responses":{"200":{"description":"成功获取批次状态","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SmsBatchResponseDto"}}}},"401":{"description":"未授权"},"403":{"description":"没有权限访问该批次"},"404":{"description":"批次未找到"}},"security":[{"bearer":[]}],"summary":"获取指定短信发送批次的状态","tags":["status"]}},"/status/sms/message/{messageId}":{"get":{"description":"返回单条短信的详细信息，包括发送状态、接收者和内容","operationId":"StatusController_getSmsMessageStatus","parameters":[{"name":"messageId","required":true,"in":"path","description":"短信消息 ID","schema":{"example":456,"type":"number"}}],"responses":{"200":{"description":"成功获取消息状态","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SmsMessageResponseDto"}}}},"401":{"description":"未授权"},"403":{"description":"没有权限访问该消息"},"404":{"description":"消息未找到"}},"security":[{"bearer":[]}],"summary":"获取指定单条短信的状态","tags":["status"]}},"/status/sms/batch/{batchId}/messages":{"get":{"description":"支持分页和过滤条件，返回批次中的短信消息列表","operationId":"StatusController_getSmsBatchMessages","parameters":[{"name":"batchId","required":true,"in":"path","description":"短信批次 ID","schema":{"type":"number"}},{"name":"page","required":true,"in":"query","description":"页码，从1开始","schema":{"minimum":1,"default":1,"example":1,"type":"number"}},{"name":"limit","required":true,"in":"query","description":"每页数量，默认为20，最大为100","schema":{"minimum":1,"maximum":100,"default":20,"example":20,"type":"number"}},{"name":"status","required":false,"in":"query","description":"根据消息状态过滤","schema":{"type":"string","enum":["pending","queued","submitted","sent","delivered","failed","rejected","unknown","sending"]}},{"name":"recipient","required":false,"in":"query","description":"接收者号码（支持模糊搜索）","schema":{"example":"138","type":"string"}},{"name":"sortBy","required":false,"in":"query","description":"排序字段","schema":{"default":"id","type":"string","enum":["id","status","createdAt","sentAt"]}},{"name":"sortOrder","required":false,"in":"query","description":"排序方向","schema":{"default":"DESC","type":"string","enum":["ASC","DESC"]}}],"responses":{"200":{"description":"成功获取消息列表"},"401":{"description":"未授权"},"403":{"description":"没有权限访问该批次"},"404":{"description":"批次未找到"}},"security":[{"bearer":[]}],"summary":"获取短信批次中的消息列表","tags":["status"]}},"/status/email/batch/{batchId}":{"get":{"description":"返回指定批次的详细信息，包括批次状态、成功/失败数量以及所有邮件的状态","operationId":"StatusController_getEmailBatchStatus","parameters":[{"name":"batchId","required":true,"in":"path","description":"邮件批次 ID","schema":{"example":789,"type":"number"}}],"responses":{"200":{"description":"成功获取批次状态","content":{"application/json":{"schema":{"$ref":"#/components/schemas/EmailBatchResponseDto"}}}},"401":{"description":"未授权"},"403":{"description":"没有权限访问该批次"},"404":{"description":"批次未找到"}},"security":[{"bearer":[]}],"summary":"获取指定邮件发送批次的状态","tags":["status"]}},"/status/email/message/{messageId}":{"get":{"description":"返回单条邮件的详细信息，包括发送状态、接收者和主题","operationId":"StatusController_getEmailMessageStatus","parameters":[{"name":"messageId","required":true,"in":"path","description":"邮件消息 ID","schema":{"example":101,"type":"number"}}],"responses":{"200":{"description":"成功获取消息状态","content":{"application/json":{"schema":{"$ref":"#/components/schemas/EmailMessageResponseDto"}}}},"401":{"description":"未授权"},"403":{"description":"没有权限访问该消息"},"404":{"description":"消息未找到"}},"security":[{"bearer":[]}],"summary":"获取指定单条邮件的状态","tags":["status"]}},"/status/email/batch/{batchId}/messages":{"get":{"description":"支持分页和过滤条件，返回批次中的邮件消息列表","operationId":"StatusController_getEmailBatchMessages","parameters":[{"name":"batchId","required":true,"in":"path","description":"邮件批次 ID","schema":{"type":"number"}},{"name":"page","required":true,"in":"query","description":"页码，从1开始","schema":{"minimum":1,"default":1,"example":1,"type":"number"}},{"name":"limit","required":true,"in":"query","description":"每页数量，默认为20，最大为100","schema":{"minimum":1,"maximum":100,"default":20,"example":20,"type":"number"}},{"name":"status","required":false,"in":"query","description":"根据消息状态过滤","schema":{"type":"string","enum":["pending","queued","submitted","sent","delivered","failed","rejected","unknown","sending"]}},{"name":"recipient","required":false,"in":"query","description":"接收者号码（支持模糊搜索）","schema":{"example":"138","type":"string"}},{"name":"sortBy","required":false,"in":"query","description":"排序字段","schema":{"default":"id","type":"string","enum":["id","status","createdAt","sentAt"]}},{"name":"sortOrder","required":false,"in":"query","description":"排序方向","schema":{"default":"DESC","type":"string","enum":["ASC","DESC"]}}],"responses":{"200":{"description":"成功获取消息列表"},"401":{"description":"未授权"},"403":{"description":"没有权限访问该批次"},"404":{"description":"批次未找到"}},"security":[{"bearer":[]}],"summary":"获取邮件批次中的消息列表","tags":["status"]}},"/status/email/received":{"get":{"description":"支持按发送人、接收人、主题和类型过滤，返回满足条件的接收记录","operationId":"StatusController_getEmailReceivedMessages","parameters":[{"name":"page","required":true,"in":"query","description":"页码，从1开始","schema":{"minimum":1,"default":1,"example":1,"type":"number"}},{"name":"limit","required":true,"in":"query","description":"每页数量，默认为20，最大为100","schema":{"minimum":1,"maximum":100,"default":20,"example":20,"type":"number"}},{"name":"tenantId","required":false,"in":"query","description":"租户ID（仅管理员可用）","schema":{"example":1,"type":"number"}},{"name":"senderEmail","required":false,"in":"query","description":"发送方邮箱 (模糊查询)","schema":{"example":"sender@example.com","type":"string"}},{"name":"recipientEmail","required":false,"in":"query","description":"接收方邮箱 (模糊查询)","schema":{"example":"receiver@example.com","type":"string"}},{"name":"subject","required":false,"in":"query","description":"邮件主题 (模糊查询)","schema":{"example":"验证码","type":"string"}},{"name":"type","required":false,"in":"query","description":"邮件类型","schema":{"example":"inbound","type":"string","enum":["inbound","bounce","reply","complaint"]}}],"responses":{"200":{"description":"成功获取邮件接收记录","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaginatedResponseDto"}}}},"401":{"description":"未授权"}},"security":[{"bearer":[]}],"summary":"分页查询邮件接收记录","tags":["status"]}},"/system/captcha/get":{"post":{"operationId":"CaptchaController_getCaptcha","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/GetCaptchaDto"}}}},"responses":{"200":{"description":"成功获取验证码"}},"summary":"获取验证码","tags":["验证码"]}},"/system/captcha/check":{"post":{"operationId":"CaptchaController_checkCaptcha","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CheckCaptchaDto"}}}},"responses":{"200":{"description":"验证码校验结果"}},"summary":"校验验证码","tags":["验证码"]}},"/system/dict-data/simple-list":{"get":{"operationId":"DictDataController_getSimpleList","parameters":[],"responses":{"200":{"description":""}},"summary":"获取字典数据简化列表","tags":["系统：字典数据管理"]}},"/system/notify-message/get-unread-count":{"get":{"operationId":"NotifyMessageController_getUnreadCount","parameters":[],"responses":{"200":{"description":""}},"summary":"获取当前用户的未读消息数量","tags":["系统：站内信通知"]}}},"info":{"title":"SMS Serve API","description":"API documentation for the SMS Serving application","version":"1.0","contact":{}},"tags":[],"servers":[],"components":{"securitySchemes":{"bearer":{"scheme":"bearer","bearerFormat":"JWT","type":"http"}},"schemas":{"CreateUserDto":{"type":"object","properties":{"username":{"type":"string","description":"用户名","example":"admin"},"email":{"type":"string","description":"电子邮箱","example":"admin@example.com"},"password":{"type":"string","description":"密码","example":"admin123"},"confirmPassword":{"type":"string","description":"确认密码","example":"admin123"},"role":{"type":"string","description":"用户角色","enum":["admin","user"],"default":"user"},"isAdmin":{"type":"boolean","description":"是否为管理员","example":true},"tenantName":{"type":"string","description":"租户名称","example":"yudao"}},"required":["username","email","password","confirmPassword"]},"User":{"type":"object","properties":{}},"CreateTenantDto":{"type":"object","properties":{"name":{"type":"string","description":"租户名称","example":"芋道源码"},"code":{"type":"string","description":"租户唯一编码","example":"yudao"},"website":{"type":"string","description":"租户网站地址","example":"https://www.example.com"},"contactEmail":{"type":"string","description":"联系邮箱","example":"contact@example.com"},"contactPhone":{"type":"string","description":"联系电话","example":"13800138000"},"logoUrl":{"type":"string","description":"Logo URL","example":"https://www.example.com/logo.png"},"status":{"type":"string","description":"租户状态","enum":["active","inactive","suspended"],"default":"active"},"expirationDate":{"type":"string","description":"过期日期","example":"2023-12-31"}},"required":["name","code"]},"Tenant":{"type":"object","properties":{"id":{"type":"number","description":"租户ID"},"name":{"type":"string","description":"租户名称"},"code":{"type":"string","description":"租户唯一编码"},"website":{"type":"string","description":"租户网站地址"},"contactEmail":{"type":"string","description":"联系邮箱"},"contactPhone":{"type":"string","description":"联系电话"},"logoUrl":{"type":"string","description":"Logo URL"},"status":{"type":"string","description":"租户状态","enum":["active","inactive","suspended"],"default":"active"},"expirationDate":{"format":"date-time","type":"string","description":"过期日期"},"createdAt":{"format":"date-time","type":"string","description":"创建时间"},"updatedAt":{"format":"date-time","type":"string","description":"更新时间"}},"required":["id","name","code","status","createdAt","updatedAt"]},"UpdateTenantDto":{"type":"object","properties":{"name":{"type":"string","description":"租户名称","example":"芋道源码"},"code":{"type":"string","description":"租户唯一编码","example":"yudao"},"website":{"type":"string","description":"租户网站地址","example":"https://www.example.com"},"contactEmail":{"type":"string","description":"联系邮箱","example":"contact@example.com"},"contactPhone":{"type":"string","description":"联系电话","example":"13800138000"},"logoUrl":{"type":"string","description":"Logo URL","example":"https://www.example.com/logo.png"},"status":{"type":"string","description":"租户状态","enum":["active","inactive","suspended"]},"expirationDate":{"type":"string","description":"过期日期","example":"2023-12-31"}}},"LoginUserDto":{"type":"object","properties":{"username":{"type":"string","description":"用户名或邮箱","example":"admin@example.com"},"password":{"type":"string","description":"用户密码","example":"password123"},"captchaVerification":{"type":"string","description":"验证码校验成功的令牌","example":"abcd1234-verification-token"},"tenantName":{"type":"string","description":"租户名称","example":"芋道源码"},"clientId":{"type":"string","description":"客户端标识","example":"web","default":"web"},"rememberMe":{"type":"boolean","description":"是否记住我","example":true}},"required":["username","password"]},"LoginResponseDto":{"type":"object","properties":{"id":{"type":"number","description":"令牌ID","example":1},"accessToken":{"type":"string","description":"访问令牌","example":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."},"refreshToken":{"type":"string","description":"刷新令牌","example":"a762fdf8-d3cc-4e1c-a6f3-88194e6b30f9"},"userId":{"type":"number","description":"用户ID","example":1},"userType":{"type":"number","description":"用户类型","example":1,"default":1},"clientId":{"type":"string","description":"客户端ID","example":"web"},"expiresTime":{"type":"number","description":"过期时间(Unix时间戳)","example":1609459200},"sessionId":{"type":"string","description":"会话ID","example":"a762fdf8-d3cc-4e1c-a6f3-88194e6b30f9"},"tenantId":{"type":"object","description":"租户ID","example":1,"nullable":true}},"required":["id","accessToken","refreshToken","userId","userType","clientId","expiresTime"]},"RefreshTokenDto":{"type":"object","properties":{"refreshToken":{"type":"string","description":"刷新令牌","example":"e1b9aaf5-9a5d-4c1c-8254-35e4f7523fb9"},"sessionId":{"type":"string","description":"会话ID","example":"f8d9e3b7-3c6e-4a5f-9d2b-1a7c8e6f5d4c"},"rememberMe":{"type":"boolean","description":"是否记住我","example":true}},"required":["refreshToken"]},"UserInfoDto":{"type":"object","properties":{"id":{"type":"number","description":"用户ID"},"nickname":{"type":"string","description":"用户昵称"},"avatar":{"type":"string","description":"用户头像"},"deptId":{"type":"object","description":"部门ID"}},"required":["id","nickname","avatar"]},"MenuDto":{"type":"object","properties":{"id":{"type":"number","description":"菜单ID"},"name":{"type":"string","description":"菜单名称"},"path":{"type":"string","description":"路由地址"},"component":{"type":"string","description":"组件路径"},"componentName":{"type":"string","description":"组件名称"},"icon":{"type":"string","description":"图标"},"visible":{"type":"boolean","description":"是否可见"},"keepAlive":{"type":"boolean","description":"是否缓存"},"alwaysShow":{"type":"boolean","description":"是否总是显示"},"parentId":{"type":"number","description":"父菜单ID"},"children":{"description":"子菜单","type":"array","items":{"$ref":"#/components/schemas/MenuDto"}}},"required":["id","name","path","component","visible","keepAlive","parentId"]},"PermissionInfoResponseDto":{"type":"object","properties":{"user":{"description":"用户信息","allOf":[{"$ref":"#/components/schemas/UserInfoDto"}]},"roles":{"description":"角色列表","type":"array","items":{"type":"string"}},"permissions":{"description":"权限列表","type":"array","items":{"type":"string"}},"menus":{"description":"菜单列表","type":"array","items":{"$ref":"#/components/schemas/MenuDto"}}},"required":["user","roles","permissions","menus"]},"CreateSmsTemplateDto":{"type":"object","properties":{"name":{"type":"string","description":"模板名称","example":"Verification Code"},"content":{"type":"string","description":"模板内容，使用 {{变量名}} 表示变量","example":"您的验证码是 {{code}}，5分钟内有效。"},"variables":{"description":"模板中使用的变量列表","example":["code"],"type":"array","items":{"type":"string"}},"providerTemplateId":{"type":"string","description":"需要在服务商处报备的模板ID (如果需要)","example":"SMS_12345678"}},"required":["name","content"]},"PaginationResDto":{"type":"object","properties":{"list":{"description":"数据列表","type":"array","items":{"type":"string"}},"total":{"type":"number","description":"总记录数","example":100},"page":{"type":"number","description":"当前页码","example":1},"pageSize":{"type":"number","description":"每页数量","example":10}},"required":["list","total","page","pageSize"]},"UpdateSmsTemplateDto":{"type":"object","properties":{"name":{"type":"string","description":"模板名称","example":"Verification Code"},"content":{"type":"string","description":"模板内容，使用 {{变量名}} 表示变量","example":"您的验证码是 {{code}}，5分钟内有效。"},"variables":{"description":"模板中使用的变量列表","example":["code"],"type":"array","items":{"type":"string"}},"providerTemplateId":{"type":"string","description":"需要在服务商处报备的模板ID (如果需要)","example":"SMS_12345678"}}},"CreateEmailTemplateDto":{"type":"object","properties":{"name":{"type":"string","description":"模板名称","example":"Welcome Email"},"subject":{"type":"string","description":"默认邮件主题","example":"Welcome to Our Service!"},"bodyHtml":{"type":"string","description":"HTML 格式邮件正文模板","example":"<p>Hi {{name}}!</p>"},"bodyText":{"type":"string","description":"纯文本格式邮件正文模板","example":"请访问 {{resetLink}} 重置密码。"},"variables":{"description":"模板中使用的变量名列表","example":["appName","resetLink"],"type":"array","items":{"type":"string"}}},"required":["name","subject"]},"UpdateEmailTemplateDto":{"type":"object","properties":{"name":{"type":"string","description":"模板名称","example":"Welcome Email"},"subject":{"type":"string","description":"默认邮件主题","example":"Welcome to Our Service!"},"bodyHtml":{"type":"string","description":"HTML 格式邮件正文模板","example":"<p>Hi {{name}}!</p>"},"bodyText":{"type":"string","description":"纯文本格式邮件正文模板","example":"请访问 {{resetLink}} 重置密码。"},"variables":{"description":"模板中使用的变量名列表","example":["appName","resetLink"],"type":"array","items":{"type":"string"}}}},"OnbukaConfigDto":{"type":"object","properties":{"appid":{"type":"string","description":"Onbuka应用ID","example":"41uaKsL2"}},"required":["appid"]},"CreateSmsProviderDto":{"type":"object","properties":{"name":{"type":"string","description":"供应商唯一标识(如onbuka)","example":"onbuka"},"displayName":{"type":"string","description":"供应商显示名称","example":"Onbuka SMS服务"},"apiKey":{"type":"string","description":"API密钥","example":"bDqJFiq9"},"apiSecret":{"type":"string","description":"API密钥密文","example":"7bz1lzh9"},"baseUrl":{"type":"string","description":"API基础URL","example":"https://api.onbuka.com"},"configDetails":{"description":"供应商特定配置","allOf":[{"$ref":"#/components/schemas/OnbukaConfigDto"}]},"isActive":{"type":"boolean","description":"是否启用","example":true}},"required":["name","displayName","apiKey","apiSecret","configDetails"]},"UpdateSmsProviderDto":{"type":"object","properties":{"displayName":{"type":"string","description":"供应商显示名称","example":"Onbuka SMS服务"},"apiKey":{"type":"string","description":"API密钥","example":"bDqJFiq9"},"apiSecret":{"type":"string","description":"API密钥密文","example":"7bz1lzh9"},"baseUrl":{"type":"string","description":"API基础URL","example":"https://api.onbuka.com"},"configDetails":{"description":"供应商特定配置","allOf":[{"$ref":"#/components/schemas/OnbukaConfigDto"}]},"isActive":{"type":"boolean","description":"是否启用","example":true}}},"SendSmsDto":{"type":"object","properties":{"providerId":{"type":"number","description":"短信服务商的 ID","example":1},"recipients":{"description":"接收短信的手机号码列表","example":["13800138000","13912345678"],"type":"array","items":{"type":"string"}},"content":{"type":"string","description":"短信内容 (如果未提供 templateId 则必须)","example":"您的验证码是123456，5分钟内有效"},"templateId":{"type":"number","description":"使用的短信模板 ID (如果未提供 content 则必须)","example":1},"variables":{"type":"object","description":"模板变量 (如果使用了模板)","example":{"code":"123456","name":"张三"},"additionalProperties":{"type":"string"}},"scheduledAt":{"type":"string","description":"预定发送时间 (ISO 8601 格式)","example":"2023-08-01T15:00:00Z"}},"required":["providerId","recipients"]},"SendEmailDto":{"type":"object","properties":{"recipients":{"description":"接收者邮箱地址列表","example":["user1@example.com","user2@example.com"],"type":"array","items":{"type":"string"}},"subject":{"type":"string","description":"邮件主题","example":"您的验证码"},"body":{"type":"string","description":"邮件内容（HTML格式）","example":"<p>您的验证码是：<strong>123456</strong>，5分钟内有效。</p>"},"templateId":{"type":"number","description":"使用的邮件模板ID","example":1},"variables":{"type":"object","description":"模板变量","example":{"code":"123456","name":"张三"}},"scheduledAt":{"type":"string","description":"计划发送时间（ISO8601格式）","example":"2023-08-15T14:30:00Z"}},"required":["recipients"]},"PaginationMeta":{"type":"object","properties":{"page":{"type":"number","description":"当前页码","example":1},"limit":{"type":"number","description":"每页条数","example":20},"total":{"type":"number","description":"总记录数","example":100},"pages":{"type":"number","description":"总页数","example":5},"hasNext":{"type":"boolean","description":"是否有下一页","example":true},"hasPrev":{"type":"boolean","description":"是否有上一页","example":false}},"required":["page","limit","total","pages","hasNext","hasPrev"]},"PaginatedResponseDto":{"type":"object","properties":{"meta":{"description":"分页元数据","allOf":[{"$ref":"#/components/schemas/PaginationMeta"}]},"items":{"description":"数据项列表","type":"array","items":{"type":"string"}}},"required":["meta","items"]},"SmsMessageResponseDto":{"type":"object","properties":{"id":{"type":"number","description":"短信消息ID","example":12345},"batchId":{"type":"number","description":"所属批次ID","example":100},"recipientNumber":{"type":"string","description":"接收者电话号码","example":"+8613900001234"},"content":{"type":"string","description":"短信内容","example":"您的验证码是: 123456，5分钟内有效"},"status":{"type":"string","description":"发送状态","enum":["pending","queued","submitted","sent","delivered","failed","rejected","unknown","sending"],"example":"sent"},"providerMessageId":{"type":"string","description":"短信提供商的消息ID","example":"sms-provider-msg-id-12345","nullable":true},"errorMessage":{"type":"string","description":"错误信息（如果发送失败）","example":"号码无效","nullable":true},"sentAt":{"format":"date-time","type":"string","description":"发送时间","example":"2023-08-01T12:34:56Z","nullable":true},"statusUpdatedAt":{"format":"date-time","type":"string","description":"状态更新时间","example":"2023-08-01T12:35:00Z"}},"required":["id","batchId","recipientNumber","content","status","statusUpdatedAt"]},"SmsBatchResponseDto":{"type":"object","properties":{"id":{"type":"number","description":"批次ID","example":100},"userId":{"type":"number","description":"用户ID","example":1},"status":{"type":"string","description":"批次状态","enum":["pending","processing","partially_completed","completed","failed"],"example":"completed"},"totalCount":{"type":"number","description":"总消息数","example":10},"successCount":{"type":"number","description":"发送成功数","example":8},"failedCount":{"type":"number","description":"发送失败数","example":2},"createdAt":{"format":"date-time","type":"string","description":"创建时间","example":"2023-08-01T12:30:00Z"},"updatedAt":{"format":"date-time","type":"string","description":"更新时间","example":"2023-08-01T12:36:00Z"},"scheduledAt":{"format":"date-time","type":"string","description":"计划发送时间（如果是定时发送）","example":"2023-08-01T14:00:00Z","nullable":true},"messages":{"description":"短信消息列表","type":"array","items":{"$ref":"#/components/schemas/SmsMessageResponseDto"}}},"required":["id","userId","status","totalCount","successCount","failedCount","createdAt","updatedAt"]},"EmailMessageResponseDto":{"type":"object","properties":{"id":{"type":"number","description":"邮件消息ID","example":12345},"batchId":{"type":"number","description":"所属批次ID","example":100},"recipientEmail":{"type":"string","description":"接收者邮箱地址","example":"user@example.com"},"subject":{"type":"string","description":"邮件主题","example":"您的验证码"},"status":{"type":"string","description":"发送状态","enum":["pending","queued","sending","sent","delivered","failed","rejected","bounced"],"example":"sent"},"providerMessageId":{"type":"string","description":"邮件提供商的消息ID","example":"email-provider-msg-id-12345","nullable":true},"errorMessage":{"type":"string","description":"错误信息（如果发送失败）","example":"邮箱地址不存在","nullable":true},"sentAt":{"format":"date-time","type":"string","description":"发送时间","example":"2023-08-01T12:34:56Z","nullable":true},"statusUpdatedAt":{"format":"date-time","type":"string","description":"状态更新时间","example":"2023-08-01T12:35:00Z"}},"required":["id","batchId","recipientEmail","subject","status","statusUpdatedAt"]},"EmailBatchResponseDto":{"type":"object","properties":{"id":{"type":"number","description":"批次ID","example":100},"userId":{"type":"number","description":"用户ID","example":1},"status":{"type":"string","description":"批次状态","enum":["pending","processing","partially_completed","completed","failed"],"example":"completed"},"totalCount":{"type":"number","description":"总消息数","example":10},"successCount":{"type":"number","description":"发送成功数","example":8},"failedCount":{"type":"number","description":"发送失败数","example":2},"createdAt":{"format":"date-time","type":"string","description":"创建时间","example":"2023-08-01T12:30:00Z"},"updatedAt":{"format":"date-time","type":"string","description":"更新时间","example":"2023-08-01T12:36:00Z"},"scheduledAt":{"format":"date-time","type":"string","description":"计划发送时间（如果是定时发送）","example":"2023-08-01T14:00:00Z","nullable":true},"messages":{"description":"邮件消息列表","type":"array","items":{"$ref":"#/components/schemas/EmailMessageResponseDto"}}},"required":["id","userId","status","totalCount","successCount","failedCount","createdAt","updatedAt"]},"GetCaptchaDto":{"type":"object","properties":{"captchaType":{"type":"string","description":"验证码类型","enum":["blockPuzzle","clickWord"],"example":"blockPuzzle"}},"required":["captchaType"]},"CheckCaptchaDto":{"type":"object","properties":{"captchaType":{"type":"string","description":"验证码类型","enum":["blockPuzzle","clickWord"],"example":"blockPuzzle"},"pointJson":{"type":"string","description":"用户操作的坐标JSON","example":"{\"x\": 120, \"y\": 5.0}"},"token":{"type":"string","description":"验证码会话token","example":"a1b2c3d4-5e6f-7g8h-9i0j-k1l2m3n4o5p6"}},"required":["captchaType","pointJson","token"]}}}}